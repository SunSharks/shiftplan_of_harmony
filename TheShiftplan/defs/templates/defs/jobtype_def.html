{% extends "defs/defbase.html" %}

{% block content %}
<div class = "navbar">
    <div class = "navbar item">
        <li><a href="{% url 'defs:index' %}">Back Home</a></li>
    </div>
    <div class = "navbar item">
        <li><a href="{% url 'defs:subcrew_def' %}">Subcrew Overview</a></li>
    </div>
</div>
<legend><h1>Jobtypes</h1></legend>
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

{% for jt in jobtypes %}
    <div class="single_jobtype">
        <input type="text" name="jt_name" id="jt_name{{ forloop.counter }}" value="{{ jt.name }}" disabled>
        <li><a href="{% url 'defs:update-jobtype' jt.id %}">Update</a></li>
        <li><a href="{% url 'defs:detail-jobtype' jt.id %}">Delete</a></li>
        <li><a href="{% url 'defs:job_def' jt.id %}">Shifts</a></li>
        {% if jt.restricted_to_subcrew %}
            <li>Restricted to subcrew: {{ jt.subcrew }} <a href="{% url 'defs:detail-subcrew' subcrews_context|dict_key:jt.id %}">Update Subcrew</a></li>
        {% else %}
            <li>Open for all users.</li>
        {% endif %}
        <br>
    </div>
{% endfor %}

<div id="jobtypeforms"></div>

<button type="button" hx-get="{% url 'defs:jobtype-form' %}" hx-target="#jobtypeforms" hx-swap="beforeend">
    Add jobtype
</button>

{% endblock %}
